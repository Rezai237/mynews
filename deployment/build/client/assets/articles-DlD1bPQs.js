import{w as A}from"./with-props-DRM106Ts.js";import{a as i,o as e,t as n}from"./chunk-D4RADZKF-DUJFVFZr.js";import{u as S}from"./authStore-CBBhFNwG.js";import{u as C}from"./articlesStore-C2OzSC6v.js";import{B as g}from"./Button-D7YxVoDp.js";import{I as L}from"./Input-BZbkvE__.js";import{L as E}from"./LoadingSpinner-njtnuVwo.js";import{m as F,k as T}from"./utils-Dmsv2dCC.js";import{V as x}from"./index-BvIfFWLG.js";import{A as D}from"./arrow-left-CB9Wz_nk.js";import{P as p}from"./plus-vaOFuVxj.js";import{S as P}from"./search-DmgkZgui.js";import{E as y}from"./eye-D66ep1xE.js";import{S as B}from"./square-pen-C_NUI9iH.js";import{T as _}from"./trash-2-C5GLs__0.js";function Z({}){return[{title:"Manage Articles - Admin - Techsy.News"},{name:"description",content:"Manage all articles in Techsy.News admin panel"}]}const ee=A(function(){const{user:f,profile:d}=S(),{articles:c,fetchAllArticles:m,deleteArticle:j}=C(),[b,M]=i.useState(!1),[r,v]=i.useState(""),[a,N]=i.useState("all"),[h,u]=i.useState(null);if(i.useEffect(()=>{m()},[m]),!f||(d==null?void 0:d.role)!=="admin")return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Access Denied"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"You don't have permission to manage articles."})]})});const o=c.filter(s=>{const t=s.title.toLowerCase().includes(r.toLowerCase())||s.excerpt.toLowerCase().includes(r.toLowerCase()),l=a==="all"||s.status===a;return t&&l}),w=async(s,t)=>{if(confirm(`Are you sure you want to delete "${t}"? This action cannot be undone.`))try{u(s);const l=await j(s);l.success?x.success("Article deleted successfully"):x.error(l.error||"Failed to delete article")}catch{x.error("An unexpected error occurred")}finally{u(null)}},k=s=>{const t={published:"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",draft:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400",archived:"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"};return e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${t[s]||t.draft}`,children:s.charAt(0).toUpperCase()+s.slice(1)})};return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(n,{to:"/admin",className:"p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",children:e.jsx(D,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Manage Articles"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Create, edit, and manage all your articles"})]})]}),e.jsx(n,{to:"/admin/articles/new",children:e.jsxs(g,{children:[e.jsx(p,{className:"w-4 h-4 mr-2"}),"New Article"]})})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm border border-gray-200 dark:border-gray-700 mb-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(P,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(L,{placeholder:"Search articles...",value:r,onChange:s=>v(s.target.value),className:"pl-10"})]})}),e.jsx("div",{className:"sm:w-48",children:e.jsxs("select",{value:a,onChange:s=>N(s.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"published",children:"Published"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"archived",children:"Archived"})]})})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:["Articles (",o.length,")"]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[c.filter(s=>s.status==="published").length," published, ",c.filter(s=>s.status==="draft").length," drafts"]})]})}),b?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(E,{size:"lg"})}):o.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(y,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:r||a!=="all"?"No articles match your filters":"No articles found. Create your first article to get started."}),!r&&a==="all"&&e.jsx(n,{to:"/admin/articles/new",className:"mt-4 inline-block",children:e.jsxs(g,{children:[e.jsx(p,{className:"w-4 h-4 mr-2"}),"Create First Article"]})})]}):e.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:o.map((s,t)=>e.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:t*.05},className:"p-6 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white truncate",children:s.title}),k(s.status),s.featured&&e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400",children:"Featured"})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-3 line-clamp-2",children:s.excerpt}),e.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{children:["By ",s.author.full_name]}),e.jsx("span",{children:"•"}),e.jsx("span",{children:T(s.created_at)}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:[s.views," views"]}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:[s.likes," likes"]}),s.reading_time&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsxs("span",{children:[s.reading_time," min read"]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[s.status==="published"&&e.jsx(n,{to:`/article/${s.slug}`,className:"p-2 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",title:"View Article",children:e.jsx(y,{className:"w-4 h-4"})}),e.jsx(n,{to:`/admin/articles/${s.id}/edit`,className:"p-2 text-gray-400 hover:text-green-600 dark:hover:text-green-400 transition-colors",title:"Edit Article",children:e.jsx(B,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>w(s.id,s.title),disabled:h===s.id,className:"p-2 text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors disabled:opacity-50",title:"Delete Article",children:h===s.id?e.jsx("div",{className:"w-4 h-4 border-2 border-red-600 border-t-transparent rounded-full animate-spin"}):e.jsx(_,{className:"w-4 h-4"})})]})]})},s.id))})]})]})})});export{ee as default,Z as meta};
