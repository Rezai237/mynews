import{w as N}from"./with-props-DRM106Ts.js";import{x as k,a as n,o as e}from"./chunk-D4RADZKF-DUJFVFZr.js";import{u as v}from"./authStore-CBBhFNwG.js";import{B as x}from"./Button-D7YxVoDp.js";import{I as o}from"./Input-BZbkvE__.js";import{L as C}from"./LoadingSpinner-njtnuVwo.js";import{a as S,m as d,d as _}from"./utils-Dmsv2dCC.js";import{V as u}from"./index-BvIfFWLG.js";import{U as E}from"./user-bkK-Sprj.js";import{M as P}from"./mail-DDVX_-Jv.js";import{C as I}from"./calendar-sW80RKu2.js";import{S as L}from"./square-pen-C_NUI9iH.js";import{X as M}from"./x--Nl2gWzB.js";import{S as D}from"./save-BYoAHb2A.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],T=S("camera",F);function Y({}){return[{title:"Profile - Techsy.News"},{name:"description",content:"Manage your Techsy.News profile and settings"}]}const Z=N(function(){const{user:t,profile:a,updateProfile:p}=v(),f=k(),[s,c]=n.useState(!1),[g,h]=n.useState(!1),[i,m]=n.useState({full_name:"",bio:"",website:"",twitter:"",linkedin:""});n.useEffect(()=>{if(!t){f("/auth/signin");return}a&&m({full_name:a.full_name||"",bio:a.bio||"",website:a.website||"",twitter:a.twitter||"",linkedin:a.linkedin||""})},[t,a,f]);const l=(r,j)=>{m(w=>({...w,[r]:j}))},b=async()=>{if(!(!t||!a)){h(!0);try{const{error:r}=await _.from("profiles").update(i).eq("id",t.id);if(r){u.error("Failed to update profile");return}await p(),c(!1),u.success("Profile updated successfully")}catch(r){console.error("Error updating profile:",r),u.error("Failed to update profile")}finally{h(!1)}}},y=()=>{a&&m({full_name:a.full_name||"",bio:a.bio||"",website:a.website||"",twitter:a.twitter||"",linkedin:a.linkedin||""}),c(!1)};return!t||!a?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx(C,{size:"lg"})}):e.jsx("div",{className:"min-h-screen py-12",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center mb-12",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:"My Profile"}),e.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-400",children:"Manage your account information and preferences"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsxs("div",{className:"relative inline-block",children:[a.avatar_url?e.jsx("img",{src:a.avatar_url,alt:a.full_name,className:"w-24 h-24 rounded-full object-cover mx-auto"}):e.jsx("div",{className:"w-24 h-24 bg-gray-300 dark:bg-gray-600 rounded-full flex items-center justify-center mx-auto",children:e.jsx(E,{className:"w-12 h-12 text-gray-600 dark:text-gray-400"})}),e.jsx("button",{className:"absolute bottom-0 right-0 bg-blue-600 text-white rounded-full p-2 hover:bg-blue-700 transition-colors",children:e.jsx(T,{className:"w-4 h-4"})})]}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mt-4",children:a.full_name||"Anonymous User"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 capitalize",children:a.role})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 text-gray-600 dark:text-gray-400",children:[e.jsx(P,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:t.email})]}),e.jsxs("div",{className:"flex items-center space-x-3 text-gray-600 dark:text-gray-400",children:[e.jsx(I,{className:"w-5 h-5"}),e.jsxs("span",{className:"text-sm",children:["Joined ",new Date(a.created_at).toLocaleDateString()]})]})]})]})}),e.jsx(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Profile Information"}),s?e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(x,{variant:"outline",onClick:y,disabled:g,children:[e.jsx(M,{className:"w-4 h-4 mr-2"}),"Cancel"]}),e.jsxs(x,{onClick:b,loading:g,children:[e.jsx(D,{className:"w-4 h-4 mr-2"}),"Save"]})]}):e.jsxs(x,{variant:"outline",onClick:()=>c(!0),children:[e.jsx(L,{className:"w-4 h-4 mr-2"}),"Edit"]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(o,{label:"Full Name",value:i.full_name,onChange:r=>l("full_name",r.target.value),disabled:!s,placeholder:"Enter your full name"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Bio"}),e.jsx("textarea",{value:i.bio,onChange:r=>l("bio",r.target.value),disabled:!s,rows:4,placeholder:"Tell us about yourself...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-50 dark:disabled:bg-gray-700 disabled:text-gray-500"})]}),e.jsx(o,{label:"Website",value:i.website,onChange:r=>l("website",r.target.value),disabled:!s,placeholder:"https://yourwebsite.com",type:"url"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(o,{label:"Twitter",value:i.twitter,onChange:r=>l("twitter",r.target.value),disabled:!s,placeholder:"@username"}),e.jsx(o,{label:"LinkedIn",value:i.linkedin,onChange:r=>l("linkedin",r.target.value),disabled:!s,placeholder:"linkedin.com/in/username"})]})]})]})})]}),e.jsx(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"mt-8",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-6",children:"Account Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:"Email Notifications"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Receive notifications about new articles and updates"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",defaultChecked:!0}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between py-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:"Newsletter Subscription"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Weekly digest of the latest tech news and articles"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]})]})]})})]})})});export{Z as default,Y as meta};
