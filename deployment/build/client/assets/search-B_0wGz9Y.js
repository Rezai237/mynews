import{w as H}from"./with-props-DRM106Ts.js";import{w as J,a as r,o as e}from"./chunk-D4RADZKF-DUJFVFZr.js";import{u as O}from"./articlesStore-C2OzSC6v.js";import{A as F}from"./ArticleCard-DAKA9Mgc.js";import{L as U}from"./LoadingSpinner-njtnuVwo.js";import{B as R}from"./Button-D7YxVoDp.js";import{a as V,e as X,m as d}from"./utils-Dmsv2dCC.js";import{S as y}from"./search-DmgkZgui.js";import{X as $}from"./x--Nl2gWzB.js";import{A as G}from"./index-o_nr5B-J.js";import{F as K}from"./folder-ClYMstKx.js";import{T as Y}from"./tag-DO6hg1IZ.js";import{C as Z}from"./calendar-sW80RKu2.js";import"./bookmark-CtmUuJhp.js";import"./user-bkK-Sprj.js";import"./eye-D66ep1xE.js";import"./heart-BD4QhLHz.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],ee=V("funnel",q);function je({}){return[{title:"Search - Techsy.News"},{name:"description",content:"Search for articles, topics, and content on Techsy.News"}]}const be=H(function(){const[m,p]=J(),{articles:g,categories:B,tags:P,loading:_,fetchArticles:f,fetchCategories:j,fetchTags:b}=O(),[l,w]=r.useState(m.get("q")||""),[c,v]=r.useState(m.get("category")||""),[o,k]=r.useState(m.get("tag")||""),[n,N]=r.useState(m.get("sort")||"relevance"),[S,D]=r.useState(!1),[h,u]=r.useState([]),[E,C]=r.useState(!1);r.useEffect(()=>{j(),b(),f()},[j,b,f]);const T=r.useMemo(()=>X(t=>{M(t)},300),[]);r.useEffect(()=>{l?T(l):u([])},[l,c,o,n,T]);const M=async t=>{if(!t.trim()){u([]);return}C(!0);try{let s=g.filter(a=>{var L;const i=a.title.toLowerCase().includes(t.toLowerCase())||a.excerpt.toLowerCase().includes(t.toLowerCase())||a.content.toLowerCase().includes(t.toLowerCase()),z=!c||a.category.id===c,I=!o||((L=a.tags)==null?void 0:L.some(W=>W.id===o));return i&&z&&I});switch(n){case"date":s.sort((a,i)=>new Date(i.published_at).getTime()-new Date(a.published_at).getTime());break;case"views":s.sort((a,i)=>i.views-a.views);break;case"likes":s.sort((a,i)=>i.likes-a.likes);break;default:s.sort((a,i)=>new Date(i.published_at).getTime()-new Date(a.published_at).getTime())}u(s);const x=new URLSearchParams;t&&x.set("q",t),c&&x.set("category",c),o&&x.set("tag",o),n!=="relevance"&&x.set("sort",n),p(x)}catch(s){console.error("Search error:",s)}finally{C(!1)}},Q=()=>{v(""),k(""),N("relevance"),p(l?{q:l}:{})},A=c||o||n!=="relevance";return e.jsx("div",{className:"min-h-screen py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:"Search Articles"}),e.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-400 max-w-2xl mx-auto",children:"Find the latest technology insights, tutorials, and news"})]}),e.jsx(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-4xl mx-auto mb-8",children:e.jsxs("div",{className:"relative",children:[e.jsx(y,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 w-6 h-6"}),e.jsx("input",{type:"text",value:l,onChange:t=>w(t.target.value),placeholder:"Search for articles, topics, technologies...",className:"w-full pl-12 pr-4 py-4 text-lg border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent shadow-lg"})]})}),e.jsxs(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"mb-8",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-4",children:[e.jsxs(R,{variant:"outline",onClick:()=>D(!S),className:"flex items-center space-x-2",children:[e.jsx(ee,{className:"w-4 h-4"}),e.jsx("span",{children:"Filters"}),A&&e.jsx("span",{className:"bg-blue-600 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:[c,o,n!=="relevance"].filter(Boolean).length})]}),A&&e.jsxs(R,{variant:"ghost",onClick:Q,className:"text-gray-600 dark:text-gray-400",children:[e.jsx($,{className:"w-4 h-4 mr-2"}),"Clear Filters"]})]}),e.jsx(G,{children:S&&e.jsx(d.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700 shadow-sm",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(K,{className:"w-4 h-4 inline mr-2"}),"Category"]}),e.jsxs("select",{value:c,onChange:t=>v(t.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"All Categories"}),B.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(Y,{className:"w-4 h-4 inline mr-2"}),"Tag"]}),e.jsxs("select",{value:o,onChange:t=>k(t.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"All Tags"}),P.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(Z,{className:"w-4 h-4 inline mr-2"}),"Sort By"]}),e.jsxs("select",{value:n,onChange:t=>N(t.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"relevance",children:"Relevance"}),e.jsx("option",{value:"date",children:"Latest"}),e.jsx("option",{value:"views",children:"Most Viewed"}),e.jsx("option",{value:"likes",children:"Most Liked"})]})]})]})})})]}),e.jsx(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:E||_?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(U,{size:"lg"})}):l?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Search Results"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:[h.length," ",h.length===1?"result":"results",' for "',l,'"']})]})}),h.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:h.map((t,s)=>e.jsx(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:s*.05},children:e.jsx(F,{article:t})},t.id))}):e.jsxs("div",{className:"text-center py-16",children:[e.jsx(y,{className:"w-16 h-16 mx-auto text-gray-300 dark:text-gray-600 mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"No results found"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6 max-w-md mx-auto",children:"We couldn't find any articles matching your search. Try adjusting your search terms or filters."}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Suggestions:"}),e.jsxs("ul",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1",children:[e.jsx("li",{children:"• Check your spelling"}),e.jsx("li",{children:"• Try more general keywords"}),e.jsx("li",{children:"• Remove some filters"}),e.jsx("li",{children:"• Browse our categories instead"})]})]})]})]}):e.jsxs("div",{className:"text-center py-16",children:[e.jsx(y,{className:"w-16 h-16 mx-auto text-gray-300 dark:text-gray-600 mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Start your search"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8 max-w-md mx-auto",children:"Enter keywords above to find articles, tutorials, and insights on technology topics."}),e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Popular Searches"}),e.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:["React","AI","Blockchain","JavaScript","Python","Machine Learning","Web3","DevOps"].map(t=>e.jsx("button",{onClick:()=>w(t),className:"px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-full hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors text-sm",children:t},t))})]}),g.length>0&&e.jsxs("div",{className:"mt-16",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white mb-8",children:"Recent Articles"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:g.slice(0,6).map((t,s)=>e.jsx(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:s*.1},children:e.jsx(F,{article:t})},t.id))})]})]})})]})})});export{be as default,je as meta};
